"use strict";(self.webpackChunkexample=self.webpackChunkexample||[]).push([[745],{54745:function(t,e,n){n.r(e),n.d(e,{UsuariosModule:function(){return I}});var i=n(38583),r=n(90665),s=n(7448),o=n(9001),a=n(34570),u=n(44741),c=n(1558),l=n(64762),d=n(23075),g=n(37716),h=n(26997),p=n(91841),m=n(44531);let U=(()=>{class t{constructor(t,e){this.http=t,this.configService=e,this.apiRoot=e.config.webApiBaseUrl+"/usuario"}obtener(){return this.http.get(this.apiRoot)}obtenerPorId(t){return this.http.get(this.apiRoot+`/${t}`)}guardar(t){return this.http.post(this.apiRoot,t)}eliminar(t){return this.http.delete(this.apiRoot+`/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(g.LFG(p.eN),g.LFG(m.E4))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t){this.hostElement=t,this.conDecimales=!1,this.conNegativos=!1,this.separadorDecimal=".",this.permitir="numeros",this.canCut=!0,this.canCopy=!0,this.canPaste=!0,this.valorAnterior="",this.enteroSinSigno="^[0-9]*$",this.enteroConSigno="^-?[0-9]+$",this.decimalSinSigno="^[0-9]+(.[0-9]+)?$",this.decimalConSigno="^-?[0-9]+(.[0-9]+)?$",this.soloLetras="[a-zA-Z\xf1\xd1\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xdas]"}onPaste(t){if(this.canPaste){const e=t.clipboardData.getData("text/plain");this.validateValue(e,t)}else t.preventDefault()}onCopy(t){this.canCopy||t.preventDefault()}onCut(t){this.canCut||t.preventDefault()}onKeyDown(t){const e=t.target.selectionStart,n=t.target.value,i=this.getName(t),r=!0===t.ctrlKey||!0===t.metaKey,s=n.includes("-"),o=n.includes(this.separadorDecimal),a=["Backspace","ArrowLeft","ArrowRight","Escape","Tab"];this.conDecimales&&!(s&&e<=1)&&!o&&a.push("."===this.separadorDecimal?".":",");const u=n.charAt(0)!==this.separadorDecimal;if(this.conNegativos&&!s&&u&&0===e&&a.push("-"),-1!==a.indexOf(i)||"a"===i&&r||"c"===i&&r||"v"===i&&r||"x"===i&&r)return;let c;switch(this.valorAnterior=n,this.permitir){case"numeros":c=this.enteroSinSigno;break;case"letras":c=this.soloLetras;break;default:t.preventDefault()}new RegExp(c).test(i)||t.preventDefault()}validateValue(t,e){let n;switch(this.permitir){case"numeros":n=this.getRegex();break;case"letras":n=this.soloLetras;break;default:e.preventDefault()}new RegExp(n).test(t)||e.preventDefault()}getRegex(){let t="";return!this.conDecimales&&!this.conNegativos&&(t=this.enteroSinSigno),!this.conDecimales&&this.conNegativos&&(t=this.enteroConSigno),this.conDecimales&&!this.conNegativos&&(t=this.decimalSinSigno),this.conDecimales&&this.conNegativos&&(t=this.decimalConSigno),t}getName(t){if(t.key)return t.key;if(t.keyCode&&String.fromCharCode)switch(t.keyCode){case 8:return"Backspace";case 9:return"Tab";case 27:return"Escape";case 37:return"ArrowLeft";case 39:return"ArrowRight";case 188:return",";case 190:return".";case 109:case 173:case 189:return"-";default:return String.fromCharCode(t.keyCode)}return""}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(g.SBq))},t.\u0275dir=g.lG2({type:t,selectors:[["","appRestringirTipo",""]],hostBindings:function(t,e){1&t&&g.NdJ("paste",function(t){return e.onPaste(t)})("copy",function(t){return e.onCopy(t)})("cut",function(t){return e.onCut(t)})("keydown",function(t){return e.onKeyDown(t)})},inputs:{conDecimales:"conDecimales",conNegativos:"conNegativos",separadorDecimal:"separadorDecimal",permitir:"permitir",canCut:"canCut",canCopy:"canCopy",canPaste:"canPaste"}}),t})();function f(t,e){1&t&&(g.TgZ(0,"span",29),g._uU(1,"\n                  Este campo es requerido\n                "),g.qZA())}function Z(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",30),g.NdJ("click",function(){g.CHM(t),g.oxw();const e=g.MAs(3);return g.oxw().resetForm(e)}),g._uU(1,"\n                "),g._UZ(2,"i",31),g._uU(3," Reset\n              "),g.qZA()}}const b=function(){return["/usuarios"]};function v(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",4),g._uU(1,"\n        "),g.TgZ(2,"form",5,6),g.NdJ("ngSubmit",function(){return g.CHM(t),g.oxw().enviar()}),g._uU(4,"\n          "),g.TgZ(5,"div",7),g._uU(6,"\n            "),g.TgZ(7,"strong"),g._uU(8),g.qZA(),g._uU(9,"\n            "),g.TgZ(10,"div",8),g._uU(11,"\n              "),g.TgZ(12,"a",9),g._uU(13,"\n                "),g._UZ(14,"i",10),g._uU(15,"\n              "),g.qZA(),g._uU(16,"\n            "),g.qZA(),g._uU(17,"\n          "),g.qZA(),g._uU(18,"\n          "),g.TgZ(19,"div",11),g._uU(20,"\n            "),g.TgZ(21,"div",12),g._uU(22,"\n              "),g.TgZ(23,"label",13),g._uU(24,"Nombre"),g.qZA(),g._uU(25,"\n              "),g.TgZ(26,"div",14),g._uU(27,"\n                "),g.TgZ(28,"input",15,16),g.NdJ("ngModelChange",function(e){return g.CHM(t),g.oxw().item.nombre=e}),g.qZA(),g._uU(30,"\n                  "),g._uU(31,"\n\n                "),g.YNc(32,f,2,0,"span",17),g._uU(33,"\n              "),g.qZA(),g._uU(34,"\n            "),g.qZA(),g._uU(35,"\n\n            "),g.TgZ(36,"div",12),g._uU(37,"\n              "),g.TgZ(38,"label",18),g._uU(39,"Administrador"),g.qZA(),g._uU(40,"\n              "),g.TgZ(41,"div",14),g._uU(42,"\n                "),g.TgZ(43,"label",19),g._uU(44,"\n                  "),g.TgZ(45,"input",20),g.NdJ("ngModelChange",function(e){return g.CHM(t),g.oxw().item.administrador=e}),g.qZA(),g._uU(46,"\n                  "),g._UZ(47,"span",21),g._uU(48," "),g._UZ(49,"span",22),g._uU(50,"\n                "),g.qZA(),g._uU(51,"\n              "),g.qZA(),g._uU(52,"\n            "),g.qZA(),g._uU(53,"\n          "),g.qZA(),g._uU(54,"\n          "),g.TgZ(55,"div",23),g._uU(56,"\n            "),g.TgZ(57,"div",24),g._uU(58,"\n              "),g.YNc(59,Z,4,0,"button",25),g._uU(60,"\n              "),g.TgZ(61,"button",26),g.NdJ("click",function(){return g.CHM(t),g.oxw().regresar()}),g._uU(62,"Cancelar"),g.qZA(),g._uU(63,"\n              "),g.TgZ(64,"button",27),g._uU(65,"\n                "),g._UZ(66,"i",28),g._uU(67," Enviar\n              "),g.qZA(),g._uU(68,"\n            "),g.qZA(),g._uU(69,"\n          "),g.qZA(),g._uU(70,"\n        "),g.qZA(),g._uU(71,"\n      "),g.qZA()}if(2&t){const t=g.MAs(3),e=g.MAs(29),n=g.oxw();g.xp6(8),g.Oqu(n.title),g.xp6(4),g.Q6J("routerLink",g.DdM(9,b)),g.xp6(16),g.Q6J("ngModel",n.item.nombre)("disabled",n.id)("permitir","letras"),g.xp6(4),g.Q6J("ngIf",!e.valid&&(e.dirty||e.touched)),g.xp6(13),g.Q6J("ngModel",n.item.administrador),g.xp6(14),g.Q6J("ngIf",!n.id),g.xp6(5),g.Q6J("disabled",!t.valid)}}class A{}class T{constructor(t,e,n,i){this.route=t,this.router=e,this.toasterService=n,this.service=i,this.title="",this.item=new A,this.item.administrador=!1,this.mensaje=new d.k(n)}ngOnInit(){this.sub=this.route.params.subscribe(t=>{this.id=+t.id,this.title=this.id?"Editar usuario - ":"Nuevo usuario",this.id&&(this.blockUI.start("Loading..."),this.service.obtenerPorId(this.id).subscribe(t=>{this.item=t.data,this.blockUI.stop(),this.title+=this.item.nombre}))})}resetForm(t){this.item=new A,this.item.administrador=!1}regresar(){this.router.navigate(["/usuarios"])}enviar(){this.blockUI.start("Loading..."),this.service.guardar(this.item).subscribe(t=>{this.regresar()},t=>{this.mensaje.messageError(t.data?t.data.userMessage:t.meta.message),this.blockUI.stop()})}}T.\u0275fac=function(t){return new(t||T)(g.Y36(c.gz),g.Y36(c.F0),g.Y36(h.MJ),g.Y36(U))},T.\u0275cmp=g.Xpm({type:T,selectors:[["usuarios-form"]],decls:11,vars:1,consts:[[1,"animated","fadeIn"],[1,"row","justify-content-center"],[1,"col-md-8"],["class","card",4,"blockUI"],[1,"card"],[1,"form-horizontal",3,"ngSubmit"],["frmUsuario","ngForm"],[1,"card-header"],[1,"card-actions"],["tooltip","Regresar","href","#",1,"btn-setting","text-primary",3,"routerLink"],[1,"icon-arrow-left-circle"],[1,"card-body"],[1,"form-group","row"],["for","name",1,"col-md-3","form-control-label"],[1,"col-md-9"],["name","nomUsuario","placeholder","Ingrese nombre de usuario (Sin dominio)","type","text","required","","appRestringirTipo","",1,"form-control",3,"ngModel","disabled","permitir","ngModelChange"],["nomUsuario","ngModel"],["class","help-block text-danger",4,"ngIf"],["for","chk",1,"col-md-3","form-control-label"],[1,"switch","switch-default","switch-pill","switch-success-outline-alt"],["name","idUsuario","type","checkbox",1,"switch-input",3,"ngModel","ngModelChange"],[1,"switch-label"],[1,"switch-handle"],[1,"card-footer","clearfix"],[1,"group-buttons","float-right"],["class","btn btn-sm","type","reset",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[1,"far","fa-dot-circle"],[1,"help-block","text-danger"],["type","reset",1,"btn","btn-sm",3,"click"],[1,"fa","fa-ban"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g._uU(1,"\n  "),g.TgZ(2,"div",1),g._uU(3,"\n    "),g.TgZ(4,"div",2),g._uU(5,"\n      "),g.YNc(6,v,72,10,"div",3),g._uU(7,"\n    "),g.qZA(),g._uU(8,"\n  "),g.qZA(),g._uU(9,"\n"),g.qZA(),g._uU(10,"\n")),2&t&&(g.xp6(6),g.Q6J("blockUI","usuario-data"))},directives:[u.Z2,r._Y,r.JL,r.F,c.yS,r.Fj,r.Q7,_,r.JJ,r.On,i.O5,r.Wl],encapsulation:2}),(0,l.gn)([(0,u.bH)("usuario-data")],T.prototype,"blockUI",void 0);var q=n(88259),w=n.n(q);const x=function(t){return["/usuarios/form/edit",t]};function k(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"tr"),g._uU(1,"\n                      "),g.TgZ(2,"td"),g._uU(3),g.qZA(),g._uU(4,"\n                      "),g.TgZ(5,"td",16),g.TgZ(6,"input",17),g.NdJ("ngModelChange",function(e){return g.CHM(t).$implicit.administrador=e}),g.qZA(),g.qZA(),g._uU(7,"\n                      "),g.TgZ(8,"td",18),g._uU(9,"\n                        "),g.TgZ(10,"div",19),g._uU(11,"\n                          "),g.TgZ(12,"a",20),g._uU(13,"\n                            "),g._UZ(14,"i",21),g._uU(15,"\n                          "),g.qZA(),g._uU(16,"\n                          "),g.TgZ(17,"button",22),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(3).eliminar(e.id)}),g._uU(18,"\n                            "),g._UZ(19,"i",23),g._uU(20,"\n                          "),g.qZA(),g._uU(21,"\n                          "),g._uU(22,"\n                        "),g.qZA(),g._uU(23,"\n                      "),g.qZA(),g._uU(24,"\n                    "),g.qZA()}if(2&t){const t=e.$implicit;g.xp6(3),g.Oqu(t.nombre),g.xp6(3),g.MGl("id","",t.id,"_administrador"),g.Q6J("ngModel",t.administrador),g.xp6(6),g.Q6J("routerLink",g.VKq(4,x,t.id))}}function C(t,e){if(1&t&&(g.TgZ(0,"tbody"),g._uU(1,"\n                    "),g.YNc(2,k,25,6,"tr",15),g._uU(3,"\n                  "),g.qZA()),2&t){const t=g.oxw(2);g.xp6(2),g.Q6J("ngForOf",t.usuarios)}}function y(t,e){1&t&&(g.TgZ(0,"tbody"),g._uU(1,"\n                    "),g.TgZ(2,"tr"),g._uU(3,"\n                      "),g.TgZ(4,"td",24),g._uU(5,"No existen elementos para mostrar"),g.qZA(),g._uU(6,"\n                    "),g.qZA(),g._uU(7,"\n                  "),g.qZA())}const M=function(){return["/usuarios/form/add"]};function S(t,e){if(1&t&&(g.TgZ(0,"div",4),g._uU(1,"\n\n        "),g.TgZ(2,"div",5),g._uU(3,"\n          "),g.TgZ(4,"strong"),g._uU(5,"Listado de usuarios"),g.qZA(),g._uU(6,"\n          "),g.TgZ(7,"div",6),g._uU(8,"\n            "),g.TgZ(9,"a",7),g._uU(10,"\n              "),g._UZ(11,"i",8),g._uU(12,"\n            "),g.qZA(),g._uU(13,"\n          "),g.qZA(),g._uU(14,"\n        "),g.qZA(),g._uU(15,"\n\n        "),g.TgZ(16,"div",9),g._uU(17,"\n          "),g.TgZ(18,"div",10),g._uU(19,"\n\n            "),g.TgZ(20,"div",1),g._uU(21,"\n              "),g.TgZ(22,"div",2),g._uU(23,"\n                "),g.TgZ(24,"table",11),g._uU(25,"\n                  "),g.TgZ(26,"thead"),g._uU(27,"\n                    "),g.TgZ(28,"tr"),g._uU(29,"\n                      "),g.TgZ(30,"th",12),g._uU(31,"Usuario"),g.qZA(),g._uU(32,"\n                      "),g.TgZ(33,"th",13),g._uU(34,"Es Administrador"),g.qZA(),g._uU(35,"\n                      "),g._UZ(36,"th"),g._uU(37,"\n                    "),g.qZA(),g._uU(38,"\n                  "),g.qZA(),g._uU(39,"\n                  "),g.YNc(40,C,4,1,"tbody",14),g._uU(41,"\n                  "),g.YNc(42,y,8,0,"tbody",14),g._uU(43,"\n                "),g.qZA(),g._uU(44,"\n              "),g.qZA(),g._uU(45,"\n            "),g.qZA(),g._uU(46,"\n        "),g.qZA(),g._uU(47,"\n\n      "),g.qZA(),g._uU(48,"\n    "),g.qZA()),2&t){const t=g.oxw();g.xp6(9),g.Q6J("routerLink",g.DdM(3,M)),g.xp6(31),g.Q6J("ngIf",t.usuarios.length>0),g.xp6(2),g.Q6J("ngIf",0==t.usuarios.length)}}class N{constructor(t,e){this.toasterService=t,this.usuariosService=e,this.usuarios=[],this.mensaje=new d.k(t)}ngOnInit(){this.fillTable()}fillTable(){this.blockUI.start("Cargando..."),this.usuariosService.obtener().subscribe(t=>{this.usuarios=t.data,this.blockUI.stop()})}eliminar(t){w().fire({title:"Seguro que desea eliminar el usuario?",text:"No se podra revertir",icon:"warning",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonColor:"#D60D2B",confirmButtonText:"Si, Eliminar!",reverseButtons:!0}).then(e=>{e.value&&this.usuariosService.eliminar(t).subscribe(t=>{this.mensaje.messageSuccess("Registro eliminado correctamente"),this.fillTable()},t=>{this.mensaje.messageError(t.data?t.data.userMessage:t.meta.message)})})}}N.\u0275fac=function(t){return new(t||N)(g.Y36(h.MJ),g.Y36(U))},N.\u0275cmp=g.Xpm({type:N,selectors:[["app-usuarios-management"]],decls:10,vars:1,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],["class","card",4,"blockUI"],[1,"card"],[1,"card-header"],[1,"card-actions"],["tooltip","Agregar Nuevo","href","#",1,"btn-setting","text-primary",3,"routerLink"],[1,"fas","fa-plus"],[1,"card-body"],[1,"form"],[1,"table","table-striped","table-sm"],["scope","col"],["scope","col",2,"text-align","center"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"tab-width-15",2,"text-align","center"],["type","checkbox","disabled","",3,"id","ngModel","ngModelChange"],[1,"tab-width-10"],[1,"text-center"],["id","","href","#","role","button",1,"btn","btn-info","btn-sm",3,"routerLink"],[1,"fas","fa-pencil-alt"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"far","fa-trash-alt"],["colspan","3","align","center"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g._uU(1,"\n  "),g.TgZ(2,"div",1),g._uU(3,"\n    "),g.TgZ(4,"div",2),g._uU(5,"\n\n      "),g.YNc(6,S,49,4,"div",3),g._uU(7,"\n  "),g.qZA(),g._uU(8,"\n"),g.qZA(),g._uU(9,"\n"),g.qZA()),2&t&&(g.xp6(6),g.Q6J("blockUI","usuarios-list"))},directives:[u.Z2,c.yS,i.O5,i.sg,r.Wl,r.JJ,r.On],styles:[".tab-width-5[_ngcontent-%COMP%]{width:5%}.tab-width-10[_ngcontent-%COMP%]{width:10%}.tab-width-15[_ngcontent-%COMP%]{width:15%}.tab-width-40[_ngcontent-%COMP%]{width:40%}"]}),(0,l.gn)([(0,u.bH)("usuarios-list")],N.prototype,"blockUI",void 0);const J=c.Bz.forChild([{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["usuarios"]],decls:2,vars:0,template:function(t,e){1&t&&(g._UZ(0,"router-outlet"),g._uU(1,"\n"))},directives:[c.lC],encapsulation:2}),t})(),children:[{path:"",component:N},{path:"form/add",data:{title:"Agregar"},component:T},{path:"form/edit/:id",data:{title:"Editar"},component:T}]}]);var D=n(78434);let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({providers:[U],imports:[[i.ez,r.u5,r.UX,J,s.mr,a.U$,o.Fq,u.uh,D.o]]}),t})()}}]);